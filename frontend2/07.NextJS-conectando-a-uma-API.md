---
marp: true
theme: default
paginate: true
class: lead
---

# ğŸ§© Next.js 16 + Server Actions + API externa

### Conectando com Axios

---

## ğŸ¯ Objetivos da aula

- Criar um projeto **Next.js 16**
- Entender o conceito de **Server Actions**
- Conectar-se a uma API REST existente de **Tasks**
- Utilizar **Axios** para requisiÃ§Ãµes HTTP
- Exibir e manipular dados no front-end

---

## ğŸ—ï¸ 1. Criando o projeto

```bash
npx create-next-app@latest next-tasks
cd next-tasks
npm install axios
```

Verifique se o Next.js estÃ¡ na versÃ£o 16:

```bash
npm list next
```

---

## âš™ï¸ 2. Habilitando Server Actions

No arquivo **next.config.mjs**:

```js
/** @type {import('next').NextConfig} */
const nextConfig = {
  experimental: {
    serverActions: true,
  },
};

export default nextConfig;
```

---

## ğŸŒ 3. Configurando o Axios

Crie um arquivo `lib/api.js`:

```js
import axios from 'axios';

export const api = axios.create({
  baseURL: 'https://sua-api-de-tasks.com/api', // substitua pela URL da sua API
});
```

---

## âš™ï¸ 4. Criando Server Actions

No arquivo `app/actions/tasks.js`:

```js
'use server';

import { api } from '@/lib/api';

export async function getTasks() {
  const { data } = await api.get('/tasks');
  return data;
}

export async function createTask(formData) {
  const title = formData.get('title');
  await api.post('/tasks', { title });
  return { success: true };
}
```

---

## ğŸ§  5. Usando Server Actions em um componente

Arquivo `app/page.jsx`:

---

```jsx
import { getTasks, createTask } from './actions/tasks';

export default async function Home() {
  const tasks = await getTasks();

  async function handleSubmit(formData) {
    'use server';
    await createTask(formData);
  }

  return (
    <main className="p-8">
      <h1 className="text-2xl font-bold">ğŸ“ Lista de Tarefas</h1>

      <form action={handleSubmit} className="my-4">
        <input
          name="title"
          placeholder="Nova tarefa"
          required
          className="border p-2"
        />
        <button
          type="submit"
          className="ml-2 bg-blue-500 text-white p-2 rounded"
        >
          Adicionar
        </button>
      </form>

      <ul className="mt-4">
        {tasks.map((t) => (
          <li key={t.id} className="border-b py-1">
            {t.title}
          </li>
        ))}
      </ul>
    </main>
  );
}
```

---

## âš™ï¸ 6. Atualizando dados sem recarregar

Para atualizar a lista apÃ³s criar uma task, use **revalidatePath**:

```js
import { revalidatePath } from 'next/cache';

export async function createTask(formData) {
  const title = formData.get('title');
  await api.post('/tasks', { title });
  revalidatePath('/');
}
```

---

## ğŸ§© 7. Lidando com erros

```js
export async function getTasks() {
  try {
    const { data } = await api.get('/tasks');
    return data;
  } catch (error) {
    console.error('Erro ao buscar tarefas:', error);
    return [];
  }
}
```

---

## ğŸ§° 8. Estrutura final do projeto

```
next-tasks/
 â”œâ”€ app/
 â”‚   â”œâ”€ actions/
 â”‚   â”‚   â””â”€ tasks.js
 â”‚   â””â”€ page.jsx
 â”œâ”€ lib/
 â”‚   â””â”€ api.js
 â”œâ”€ next.config.mjs
 â”œâ”€ package.json
```

---

## ğŸš€ ConclusÃ£o

- **Server Actions** simplificam a comunicaÃ§Ã£o com APIs
- **Axios** facilita o consumo de endpoints REST
- IntegraÃ§Ã£o limpa entre **Next.js 16** e **backend existente**
- Ideal para apps que precisam de SSR + interatividade

---

## ğŸ’¡ Desafio para praticar

Implemente novas aÃ§Ãµes:

- âœ… Editar uma task
- âŒ Deletar uma task
- ğŸ§­ Filtrar por status (pendente / concluÃ­da)
- Enviar no github
- Enviar no forms https://forms.gle/LNH4uZQKsrWq6gF86

---

# ğŸ‘ Fim da Aula

### Perguntas?
